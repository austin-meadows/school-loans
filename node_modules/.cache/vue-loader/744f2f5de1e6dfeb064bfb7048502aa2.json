{"remainingRequest":"/Users/austinmeadows/Git/school-loans/.yarn/$$virtual/vue-loader-virtual-675bffbb1e/0/cache/vue-loader-npm-15.9.5-092b2add56-7eabaade36.zip/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/austinmeadows/Git/school-loans/src/views/Login.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/austinmeadows/Git/school-loans/src/views/Login.vue","mtime":1615144647600},{"path":"/Users/austinmeadows/Git/school-loans/.yarn/$$virtual/cache-loader-virtual-ac813ffeb9/0/cache/cache-loader-npm-4.1.0-82c3da90d8-2e369f72e3.zip/node_modules/cache-loader/dist/cjs.js","mtime":315532800000},{"path":"/Users/austinmeadows/Git/school-loans/.yarn/$$virtual/babel-loader-virtual-5e9184f3b1/0/cache/babel-loader-npm-8.2.2-b4e600c2c5-362bb71573.zip/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/austinmeadows/Git/school-loans/.yarn/$$virtual/cache-loader-virtual-ad33d86bba/0/cache/cache-loader-npm-4.1.0-82c3da90d8-2e369f72e3.zip/node_modules/cache-loader/dist/cjs.js","mtime":315532800000},{"path":"/Users/austinmeadows/Git/school-loans/.yarn/$$virtual/vue-loader-virtual-675bffbb1e/0/cache/vue-loader-npm-15.9.5-092b2add56-7eabaade36.zip/node_modules/vue-loader/lib/index.js","mtime":315532800000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IEhlYWRpbmcsIElucHV0LCBTZWN0aW9uIH0gZnJvbSAiLi4vY29tcG9uZW50cyI7CmltcG9ydCB7IHZhbGlkYXRlIH0gZnJvbSAiLi4vdXRpbHMvanMiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEhlYWRpbmcsCiAgICBJbnB1dCwKICAgIFNlY3Rpb24sCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZW1haWw6ICIiLAogICAgICBlbWFpbENvbmZpcm06ICIiLAogICAgICBmb3JtS2luZDogImxvZ2luRm9ybSIsCiAgICAgIGlzSGlkZGVuOiB0cnVlLAogICAgICBpc0xvYWRpbmc6IGZhbHNlLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIHBhc3N3b3JkQ29uZmlybTogIiIsCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgY2hlY2tGb3JtKGUpIHsKICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwoKICAgICAgdGhpcy5pc0xvYWRpbmcgPSB0cnVlOwoKICAgICAgY29uc3QgeyBlbWFpbCwgZW1haWxDb25maXJtLCBmb3JtS2luZCwgcGFzc3dvcmQsIHBhc3N3b3JkQ29uZmlybSB9ID0gdGhpczsKICAgICAgY29uc3QgZXJyb3JzID0gW107CgogICAgICBpZiAoIXZhbGlkYXRlKCJlbWFpbCIsIGVtYWlsKSkgewogICAgICAgIGVycm9ycy5wdXNoKCJJbnZhbGlkIGVtYWlsLiIpOwogICAgICB9CgogICAgICAvLyBWYWxpZGF0aW9uIGNoZWNrcyBzcGVjaWZpYyB0byB0aGUgU2lnbiBVcCBmb3JtCiAgICAgIGlmIChmb3JtS2luZCA9PT0gInNpZ25VcEZvcm0iKSB7CiAgICAgICAgaWYgKHBhc3N3b3JkLmxlbmd0aCA8IDgpIHsKICAgICAgICAgIGVycm9ycy5wdXNoKCJQYXNzd29yZHMgbXVzdCBiZSBhdCBsZWFzdCA4IGNoYXJhY3RlcnMgbG9uZy4iKTsKICAgICAgICB9IGVsc2UgaWYgKHBhc3N3b3JkICE9PSBwYXNzd29yZENvbmZpcm0pIHsKICAgICAgICAgIGVycm9ycy5wdXNoKCJQYXNzd29yZHMgZG9uJ3QgbWF0Y2giKTsKICAgICAgICB9CiAgICAgICAgaWYgKGVtYWlsICE9PSBlbWFpbENvbmZpcm0pIHsKICAgICAgICAgIGVycm9ycy5wdXNoKCJFbWFpbHMgZG9uJ3QgbWF0Y2guIik7CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBJZiB0aGVyZSBhcmUgbm8gdmFsaWRhdGlvbiBlcnJvcnMsIGF0dGVtcHQgdG8gc2lnbiBpbgogICAgICBpZiAoIWVycm9ycy5sZW5ndGgpIHsKICAgICAgICAvLyBTaWdudXAgZm9ybSBhY3Rpb24KICAgICAgICBpZiAoZm9ybUtpbmQgPT09ICJzaWduVXBGb3JtIikgewogICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goInNpZ25VcCIsIHsgZW1haWwsIHBhc3N3b3JkIH0pOwogICAgICAgIH0KICAgICAgICAvLyBMb2dpbiBmb3JtIGFjdGlvbgogICAgICAgIGlmIChmb3JtS2luZCA9PT0gImxvZ2luRm9ybSIpIHsKICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJzaWduSW4iLCB7IGVtYWlsLCBwYXNzd29yZCB9KS50aGVuKChyZXN1bHQpID0+IHsKICAgICAgICAgICAgaWYgKCFyZXN1bHQpIHRoaXMuaXNMb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgLy8gSWYgdGhlcmUgYXJlIGVycm9ycywgc2hvdyBlYWNoIG9mIHRoZW0uCiAgICAgIGVsc2UgewogICAgICAgIGVycm9ycy5mb3JFYWNoKChlcnJvcikgPT4gewogICAgICAgICAgdGhpcy4kdG9hc3RlZC5zaG93KGVycm9yLCB7IHR5cGU6ICJlcnJvciIgfSk7CiAgICAgICAgICB0aGlzLmlzTG9hZGluZyA9IGZhbHNlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgb25DbGlja1N3aXRjaGVyKGUpIHsKICAgICAgY29uc3Qgc2VsZWN0ZWRGb3JtID0gZS50YXJnZXQucGFyZW50Tm9kZS5pZDsKICAgICAgaWYgKHRoaXMuZm9ybUtpbmQgIT09IHNlbGVjdGVkRm9ybSkgewogICAgICAgIHRoaXMuaXNIaWRkZW4gPSAhdGhpcy5pc0hpZGRlbjsKICAgICAgICB0aGlzLmZvcm1LaW5kID0gc2VsZWN0ZWRGb3JtOwogICAgICB9CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["Login.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Login.vue","sourceRoot":"src/views","sourcesContent":["<script>\nimport { Heading, Input, Section } from \"../components\";\nimport { validate } from \"../utils/js\";\n\nexport default {\n  components: {\n    Heading,\n    Input,\n    Section,\n  },\n  data() {\n    return {\n      email: \"\",\n      emailConfirm: \"\",\n      formKind: \"loginForm\",\n      isHidden: true,\n      isLoading: false,\n      password: \"\",\n      passwordConfirm: \"\",\n    };\n  },\n  methods: {\n    checkForm(e) {\n      e.preventDefault();\n\n      this.isLoading = true;\n\n      const { email, emailConfirm, formKind, password, passwordConfirm } = this;\n      const errors = [];\n\n      if (!validate(\"email\", email)) {\n        errors.push(\"Invalid email.\");\n      }\n\n      // Validation checks specific to the Sign Up form\n      if (formKind === \"signUpForm\") {\n        if (password.length < 8) {\n          errors.push(\"Passwords must be at least 8 characters long.\");\n        } else if (password !== passwordConfirm) {\n          errors.push(\"Passwords don't match\");\n        }\n        if (email !== emailConfirm) {\n          errors.push(\"Emails don't match.\");\n        }\n      }\n\n      // If there are no validation errors, attempt to sign in\n      if (!errors.length) {\n        // Signup form action\n        if (formKind === \"signUpForm\") {\n          this.$store.dispatch(\"signUp\", { email, password });\n        }\n        // Login form action\n        if (formKind === \"loginForm\") {\n          this.$store.dispatch(\"signIn\", { email, password }).then((result) => {\n            if (!result) this.isLoading = false;\n          });\n        }\n      }\n      // If there are errors, show each of them.\n      else {\n        errors.forEach((error) => {\n          this.$toasted.show(error, { type: \"error\" });\n          this.isLoading = false;\n        });\n      }\n    },\n    onClickSwitcher(e) {\n      const selectedForm = e.target.parentNode.id;\n      if (this.formKind !== selectedForm) {\n        this.isHidden = !this.isHidden;\n        this.formKind = selectedForm;\n      }\n    },\n  },\n};\n</script>\n\n<template>\n  <div id=\"login\">\n    <Section>\n      <div class=\"login-switcher\">\n        <Heading :class=\"{ active: isHidden }\" id=\"loginForm\">\n          <a @click=\"onClickSwitcher\">Login</a>\n        </Heading>\n        <Heading :class=\"{ active: !isHidden }\" id=\"signUpForm\">\n          <a @click=\"onClickSwitcher\">Sign up</a>\n        </Heading>\n      </div>\n      <form\n        ref=\"form\"\n        @submit=\"checkForm\"\n        novalidate=\"true\"\n        autocomplete=\"true\"\n      >\n        <Input\n          autocomplete=\"email\"\n          icon=\"envelope\"\n          name=\"email\"\n          placeholder=\"Email\"\n          type=\"email\"\n          v-model=\"email\"\n        />\n        <Input\n          :isHidden=\"isHidden\"\n          autocomplete=\"email\"\n          icon=\"envelope\"\n          name=\"emailConfirm\"\n          placeholder=\"Confirm Email\"\n          ref=\"emailConfirm\"\n          type=\"email\"\n          v-model=\"emailConfirm\"\n        />\n        <Input\n          :autocomplete=\"{\n            'new-password': !isHidden,\n            'current-password': isHidden,\n          }\"\n          icon=\"key\"\n          name=\"password\"\n          placeholder=\"Password\"\n          type=\"password\"\n          v-model=\"password\"\n        />\n        <Input\n          :isHidden=\"isHidden\"\n          autocomplete=\"new-password\"\n          icon=\"key\"\n          name=\"passwordConfirm\"\n          placeholder=\"Confirm Password\"\n          ref=\"passwordConfirm\"\n          type=\"password\"\n          v-model=\"passwordConfirm\"\n        />\n        <Input\n          :isLoading=\"isLoading\"\n          icon=\"sign-in-alt\"\n          :placeholder=\"this.formKind === 'loginForm' ? 'Login' : 'Sign Up'\"\n          type=\"submit\"\n        />\n      </form>\n    </Section>\n  </div>\n</template>\n\n<style lang=\"scss\">\n@import \"../utils/styles/animations\";\n@import \"../utils/styles/palette\";\n@import \"../utils/styles/sizes\";\n\n.login-switcher {\n  margin-bottom: $sizes-m;\n  text-align: center;\n  user-select: none;\n\n  > * {\n    cursor: pointer;\n    display: inline-block;\n    padding: 0 $sizes-xs;\n    transition: $default-transition;\n  }\n\n  .header:not(.active) {\n    color: $text;\n    font-weight: normal;\n  }\n}\n</style>\n"]}]}